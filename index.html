<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./style.css" />
    <title>我的导航</title>
  </head>
  <body>
    <header></header>
    <main>
      <div class="wrapper" id="main"></div>
    </main>
    <footer></footer>
    <script>
      var keys = {
        0: ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
        1: ["a", "s", "d", "f", "g", "h", "j", "k", "l"],
        2: ["z", "x", "c", "v", "b", "n", "m"],
        length: 3
      }
      //遍历keys，生成kbf标签
      var hash = {
        q: "qq.com",
        w: "weibo.com",
        e: "ele.me",
        r: "renren,com",
        t: "tianya.com",
        y: "youtube.com",
        u: "uc.com",
        i: "iqiyi.com",
        o: "opera.com",
        p: undefined,
        a: "acfun.tv",
        s: "souhu.com",
        z: "zhihu.com",
        m: "www.mcdonalds.con.cn"
      }

      //取出zzz中存下来的hash
      var hashInLocalStorage = JSON.parse(localStorage.getItem("zzz") || "null") //注意直接这样拿，拿出来的是一个字串.有时候这样会拿到一个空的字符串，把一个空的东西拿去parse可能会出错的
      if (hashInLocalStorage) {
        hash=hashInLocalStorage
      }
      index = 0
      while (index < keys["length"]) {
        div = document.createElement("div")
        div.className='row'
        main.appendChild(div)
        row = keys[index] //第一个数组 第二个数组 第三个数组
        index2 = 0
        while (index2 < row["length"]) {
          //0-9 0-8 0-6取值就是从0到length-1，把数组遍历了一遍
          kbd = document.createElement("kbd")
          kbd.textContent = row[index2]
          kbd.className='key'
          button = document.createElement("button")
          button.textContent = "编辑"
          button.id = row[index2]
          button.onclick = function(a) {
            key = a["target"]["id"] //qwr  知道用户输入的是哪一个按钮
            x = prompt("给我一个网址") // qq.com
            hash[key] = x // 覆盖按钮对应的网站 这是一次hash变更
            localStorage.setItem("zzz", JSON.stringify(hash)) //只能存字符串
            console.log(hash)
          }
          div.appendChild(kbd)
          kbd.appendChild(button)
          index2++
        }
        index++
      }
      document.onkeypress = function(put) {
        key = put["key"] //q w r t拿到用户按的键
        website = hash[key] //得到用户按键的网站
        console.log(website)
        //location.href='http://'+website//把当前地址变成新网站的地址
        window.open("http://" + website, "_blank")
      }
    </script>
  </body>
</html>
